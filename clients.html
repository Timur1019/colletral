<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corporative - Clients</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/table.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">Corporative</h1>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Monitoring</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="clients.html" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>Clients</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="workouts.html" class="nav-link">
                                <i class="fas fa-chart-line"></i>
                                <span>Workouts</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="regions.html" class="nav-link">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Regions</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-section-title">Access Controls</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>Users</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-shield-alt"></i>
                                <span>Roles</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name">admin</div>
                        <div class="user-role">Regular User</div>
                    </div>
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="content-header">
                <div class="header-left">
                    <button class="btn-back" onclick="window.history.back()">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                    </button>
                    <h1 class="page-header-title">Clients</h1>
                </div>
                <div class="header-right">
                    <div class="breadcrumbs">
                        <i class="fas fa-home"></i>
                        <span class="breadcrumb-separator">/</span>
                        <span>home</span>
                        <span class="breadcrumb-separator">/</span>
                        <span>Clients</span>
                    </div>
                    <div class="header-actions">
                        <div class="language-selector-dropdown">
                            <img src="https://flagcdn.com/w20/us.png" alt="EN" class="flag-icon">
                            <span class="lang active">EN</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <button class="icon-btn notification-btn-header">
                            <i class="fas fa-bell"></i>
                        </button>
                        <button class="icon-btn lightbulb-btn">
                            <i class="fas fa-lightbulb"></i>
                        </button>
                        <div class="user-profile-header">
                            <div class="user-avatar-header">
                                <span>RT</span>
                            </div>
                            <span class="user-name-header">Raximbardiyev Temur</span>
                        </div>
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i>
                            New client
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content Body -->
            <div class="content-body">
                <div class="page-header">
                    <h2 class="page-title">Clients</h2>
                </div>

                <!-- Financial Metrics Cards -->
                <div class="metrics-cards-grid" id="clients-metrics-cards">
                    <!-- Cards will be populated dynamically -->
                </div>

                <!-- Filters Section -->
                <div class="filters-section">
                    <div class="filters-header">
                        <h3 class="filters-title">
                            <i class="fas fa-filter"></i>
                            Filters
                        </h3>
                        <button class="btn-clear-filters" id="clear-filters-btn">
                            <i class="fas fa-times"></i>
                            Clear All
                        </button>
                    </div>
                    <div class="filters-grid">
                        <!-- MFO Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-building"></i>
                                MFO
                            </label>
                            <input type="text" class="filter-input" id="mfo-input" list="mfo-list" placeholder="Type or select...">
                            <datalist id="mfo-list">
                                <!-- Options will be populated dynamically -->
                            </datalist>
                        </div>

                        <!-- Region Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-map-marker-alt"></i>
                                Region
                            </label>
                            <input type="text" class="filter-input" id="region-input" list="region-list" placeholder="Type or select...">
                            <datalist id="region-list">
                                <!-- Options will be populated dynamically -->
                            </datalist>
                        </div>

                        <!-- Group Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-users"></i>
                                Group
                            </label>
                            <input type="text" class="filter-input" id="group-input" list="group-list" placeholder="Type or select...">
                            <datalist id="group-list">
                                <!-- Options will be populated dynamically -->
                            </datalist>
                        </div>

                        <!-- Clients Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-user-tie"></i>
                                Clients
                            </label>
                            <input type="text" class="filter-input" id="client-name-input" list="client-name-list" placeholder="Type or select...">
                            <datalist id="client-name-list">
                                <!-- Options will be populated dynamically -->
                            </datalist>
                        </div>

                        <!-- Economist Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-user-graduate"></i>
                                Economist
                            </label>
                            <input type="text" class="filter-input" id="economist-input" list="economist-list" placeholder="Type or select...">
                            <datalist id="economist-list">
                                <!-- Options will be populated dynamically -->
                            </datalist>
                        </div>

                        <!-- Lawyer Filter -->
                        <div class="filter-group">
                            <label class="filter-label">
                                <i class="fas fa-gavel"></i>
                                Lawyer
                            </label>
                            <input type="text" class="filter-input" id="lawyer-input" list="lawyer-list" placeholder="Type or select...">
                            <datalist id="lawyer-list">
                                <!-- Options will be populated dynamically -->
                            </datalist>
                        </div>
                    </div>
                </div>

                <!-- Table Container -->
                <div class="table-container">
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>No.</th>
                                    <th>
                                        MFO
                                        <button class="filter-btn">
                                            <i class="fas fa-sort"></i>
                                        </button>
                                    </th>
                                    <th>
                                        Region
                                        <button class="filter-btn">
                                            <i class="fas fa-sort"></i>
                                        </button>
                                    </th>
                                    <th>
                                        Group
                                        <button class="filter-btn">
                                            <i class="fas fa-sort"></i>
                                        </button>
                                    </th>
                                    <th>
                                        Clients
                                        <button class="filter-btn">
                                            <i class="fas fa-sort"></i>
                                        </button>
                                    </th>
                                    <th>
                                        Economist
                                        <button class="filter-btn">
                                            <i class="fas fa-sort"></i>
                                        </button>
                                    </th>
                                    <th>
                                        Lawyer
                                        <button class="filter-btn">
                                            <i class="fas fa-sort"></i>
                                        </button>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="clickable-row" data-client-name="SOHIB OMAD BARAKASI" style="cursor: pointer;">
                                    <td>1</td>
                                    <td>00978</td>
                                    <td>Toshkent</td>
                                    <td>SOHIB OMAD BARAKASI</td>
                                    <td>SOHIB OMAD BARAKASI</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name="SOHIB OMAD BARAKASI" style="cursor: pointer;">
                                    <td>2</td>
                                    <td>00408</td>
                                    <td>Andijon</td>
                                    <td>SOHIB OMAD BARAKASI</td>
                                    <td>SOHIB OMAD BARAKASI</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name="SOHIB OMAD BARAKASI" style="cursor: pointer;">
                                    <td>3</td>
                                    <td>00544</td>
                                    <td>Qoraqalpog'iston</td>
                                    <td>SOHIB OMAD BARAKASI</td>
                                    <td>ООО "BEST TEXTILE INTERNATIONAL"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name="Euro Global Invest" style="cursor: pointer;">
                                    <td>4</td>
                                    <td>01076</td>
                                    <td>Samarqand</td>
                                    <td>Euro Global Invest</td>
                                    <td>Euro Global Invest</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='ООО "EURO GLOBAL INVEST"' style="cursor: pointer;">
                                    <td>5</td>
                                    <td>00122</td>
                                    <td>Sirdaryo</td>
                                    <td>Euro Global Invest</td>
                                    <td>ООО "EURO GLOBAL INVEST"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='ООО "GLOBAL INVEST BUILD"' style="cursor: pointer;">
                                    <td>6</td>
                                    <td>00356</td>
                                    <td>Toshkent</td>
                                    <td>Euro Global Invest</td>
                                    <td>ООО "GLOBAL INVEST BUILD"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='MCHJ "EURO GLOBAL ASPHALT"' style="cursor: pointer;">
                                    <td>7</td>
                                    <td>01017</td>
                                    <td>Andijon</td>
                                    <td>Euro Global Invest</td>
                                    <td>MCHJ "EURO GLOBAL ASPHALT"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='ООО "ELITE KONSTRUKTION OPTIMA"' style="cursor: pointer;">
                                    <td>8</td>
                                    <td>00119</td>
                                    <td>Qoraqalpog'iston</td>
                                    <td>Euro Global Invest</td>
                                    <td>ООО "ELITE KONSTRUKTION OPTIMA"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='ООО "SIYOVUSH TEKSTIL BUXORO"' style="cursor: pointer;">
                                    <td>9</td>
                                    <td>01130</td>
                                    <td>Samarqand</td>
                                    <td>ООО SIYOVUSH TEKSTIL BUXORO</td>
                                    <td>ООО "SIYOVUSH TEKSTIL BUXORO"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='ООО "AGRO TRADE"' style="cursor: pointer;">
                                    <td>10</td>
                                    <td>00423</td>
                                    <td>Sirdaryo</td>
                                    <td>Agro Trade</td>
                                    <td>ООО "AGRO TRADE"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='ООО "EXIM AGRO LOGISTIC"' style="cursor: pointer;">
                                    <td>11</td>
                                    <td>00555</td>
                                    <td>Toshkent</td>
                                    <td>Agro Trade</td>
                                    <td>ООО "EXIM AGRO LOGISTIC"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='"OLTIN MATO-GROUP" МЧЖ' style="cursor: pointer;">
                                    <td>12</td>
                                    <td>00666</td>
                                    <td>Andijon</td>
                                    <td>OLTIN MATO-GROUP MCHJ</td>
                                    <td>"OLTIN MATO-GROUP" МЧЖ</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name="ORIENT- CERAMIC МЧЖ" style="cursor: pointer;">
                                    <td>13</td>
                                    <td>00777</td>
                                    <td>Qoraqalpog'iston</td>
                                    <td>OLTIN MATO-GROUP MCHJ</td>
                                    <td>ORIENT- CERAMIC МЧЖ</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='"ORIENT- CERAMIC" МЧЖ' style="cursor: pointer;">
                                    <td>14</td>
                                    <td>00888</td>
                                    <td>Samarqand</td>
                                    <td>OLTIN MATO-GROUP MCHJ</td>
                                    <td>"ORIENT- CERAMIC" МЧЖ</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                                <tr class="clickable-row" data-client-name='ООО "MODERNA CEMENT"' style="cursor: pointer;">
                                    <td>15</td>
                                    <td>00999</td>
                                    <td>Sirdaryo</td>
                                    <td>OLTIN MATO-GROUP MCHJ</td>
                                    <td>ООО "MODERNA CEMENT"</td>
                                    <td>Umid Qudratov</td>
                                    <td>Ibrat Nurulaev</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Table Footer -->
                    <div class="table-footer">
                        <div class="table-info">
                            <a href="#" class="link">Configure columns</a>
                            <span class="records-info">Displayed records: 1-15 of 444</span>
                        </div>
                        <div class="pagination">
                            <button class="pagination-btn">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <button class="pagination-btn active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn">3</button>
                            <button class="pagination-btn">4</button>
                            <button class="pagination-btn">5</button>
                            <button class="pagination-btn">6</button>
                            <button class="pagination-btn">7</button>
                            <button class="pagination-btn">8</button>
                            <button class="pagination-btn">9</button>
                            <button class="pagination-btn">10</button>
                            <span class="pagination-dots">...</span>
                            <button class="pagination-btn">29</button>
                            <button class="pagination-btn">30</button>
                            <button class="pagination-btn">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="content-footer">
                <p>The application code is published under the MIT license. 2025 - 2025</p>
                <p>Version: 1.0.0</p>
            </footer>
        </main>
    </div>

    <script src="scripts/main.js"></script>
    <script>
        // Данные финансовых метрик для клиентов (общие для страницы списка)
        const clientsMetricsData = {
            'default': {
                localExposure: { primary: 562.6, secondary: 515.4, percentage: 92 },
                ifrsExposure: { primary: 279.0, secondary: 259.6, percentage: 93 },
                expectedRecovery: { primary: 257.1, secondary: 239.8, percentage: 93 },
                plan2025: { primary: 300.0, secondary: 280.0, percentage: 93 },
                recovery2025: { primary: 275.0, secondary: 255.0, percentage: 93 }
            }
        };
        
        // Функция для генерации карточек метрик
        function generateMetricsCards(containerId, clientName) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            const metrics = clientsMetricsData[clientName] || clientsMetricsData['default'];
            
            const cards = [
                {
                    title: 'Local Exposure',
                    icon: 'fa-map-marker-alt',
                    badge: 'LOCAL',
                    primary: metrics.localExposure.primary,
                    secondaryLabel: '>500 000€ Local Exp',
                    secondary: metrics.localExposure.secondary,
                    percentage: metrics.localExposure.percentage
                },
                {
                    title: 'IFRS Exposure',
                    icon: 'fa-globe',
                    badge: 'IFRS',
                    primary: metrics.ifrsExposure.primary,
                    secondaryLabel: '>500 000€ IFRS Exp',
                    secondary: metrics.ifrsExposure.secondary,
                    percentage: metrics.ifrsExposure.percentage
                },
                {
                    title: 'Expected Recovery',
                    icon: 'fa-money-bill-wave',
                    badge: 'EXP',
                    primary: metrics.expectedRecovery.primary,
                    secondaryLabel: '>500 000€ Exp Rec',
                    secondary: metrics.expectedRecovery.secondary,
                    percentage: metrics.expectedRecovery.percentage
                },
                {
                    title: 'Plan 2025',
                    icon: 'fa-calendar-check',
                    badge: 'PLAN',
                    primary: metrics.plan2025.primary,
                    secondaryLabel: '>500 000€ Plan',
                    secondary: metrics.plan2025.secondary,
                    percentage: metrics.plan2025.percentage
                },
                {
                    title: 'Recovery 2025',
                    icon: 'fa-chart-line',
                    badge: 'REC2025',
                    primary: metrics.recovery2025.primary,
                    secondaryLabel: '>500 000€ Rec2025',
                    secondary: metrics.recovery2025.secondary,
                    percentage: metrics.recovery2025.percentage
                }
            ];
            
            container.innerHTML = cards.map((card, index) => {
                // Генерируем случайные данные для гистограммы (4 столбца)
                const chartData = Array.from({length: 4}, () => Math.random() * 100);
                const maxValue = Math.max(...chartData);
                const barWidth = 18;
                const barSpacing = 8;
                const startX = 5;
                
                // Генерируем процент изменения (случайный от -15 до +15)
                const changePercent = (Math.random() * 30 - 15).toFixed(2);
                const isPositive = parseFloat(changePercent) >= 0;
                
                // Цвета для столбцов (чередуем розовый и серый как на рисунке)
                const barColors = [
                    'rgba(236, 72, 153, 0.7)',  // розовый
                    'rgba(156, 163, 175, 0.7)', // серый
                    'rgba(236, 72, 153, 0.7)',  // розовый
                    'rgba(156, 163, 175, 0.7)'  // серый
                ];
                
                return `
                <div class="metric-card-dashboard">
                    <div class="metric-card-dashboard-header">
                        <div class="metric-card-dashboard-icon">
                            <i class="fas ${card.icon}"></i>
                        </div>
                        <div class="metric-card-dashboard-title">${card.title}</div>
                    </div>
                    <div class="metric-card-dashboard-value">${card.primary.toFixed(2)} млн</div>
                    <div class="metric-card-dashboard-change ${isPositive ? 'positive' : 'negative'}">
                        <i class="fas fa-${isPositive ? 'arrow-up' : 'arrow-down'}"></i>
                        <span>${Math.abs(changePercent)}%</span>
                        <span class="change-label">пред. мес.</span>
                    </div>
                    <div class="metric-card-dashboard-chart">
                        <svg viewBox="0 0 100 100" preserveAspectRatio="none" class="chart-svg">
                            ${chartData.map((val, i) => {
                                const barHeight = (val / maxValue) * 85;
                                const x = startX + i * (barWidth + barSpacing);
                                const y = 100 - barHeight;
                                return `
                                    <rect 
                                        x="${x}" 
                                        y="${y}" 
                                        width="${barWidth}" 
                                        height="${barHeight}"
                                        fill="${barColors[i]}"
                                        rx="2"
                                    />
                                `;
                            }).join('')}
                        </svg>
                    </div>
                </div>
            `;
            }).join('');
        }
        
        // Генерируем карточки для страницы clients.html при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            if (document.getElementById('clients-metrics-cards')) {
                generateMetricsCards('clients-metrics-cards', 'default');
            }
            
            // Инициализация фильтров
            initFilters();
            
            // Инициализация обработчиков кликов по строкам таблицы
            const clickableRows = document.querySelectorAll('.clickable-row[data-client-name]');
            clickableRows.forEach(row => {
                row.addEventListener('click', function(event) {
                    // Не переходим, если кликнули на кнопку действия или другой интерактивный элемент
                    if (event.target.closest('.action-buttons') || event.target.tagName === 'BUTTON') {
                        return;
                    }
                    
                    const clientName = this.getAttribute('data-client-name');
                    if (clientName) {
                        // Переходим на страницу деталей клиента с параметром
                        const encodedName = encodeURIComponent(clientName);
                        window.location.href = `client-detail.html?client=${encodedName}`;
                    }
                });
            });
        });
        
        // Данные для фильтров
        const filterData = {
            regions: [],
            mfos: [],
            groups: [],
            clientNames: [],
            economists: [],
            lawyers: []
        };
        
        // Собираем уникальные значения из таблицы
        function collectFilterData() {
            const rows = document.querySelectorAll('.data-table tbody tr');
            const regions = new Set();
            const mfos = new Set();
            const groups = new Set();
            const clientNames = new Set();
            const economists = new Set();
            const lawyers = new Set();
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length >= 7) {
                    const mfo = cells[1].textContent.trim();
                    const region = cells[2].textContent.trim();
                    const group = cells[3].textContent.trim(); // Group на позиции 3
                    const clientName = cells[4].textContent.trim(); // Clients на позиции 4
                    const economist = cells[5].textContent.trim(); // Economist на позиции 5
                    const lawyer = cells[6].textContent.trim(); // Lawyer на позиции 6
                    
                    if (mfo) mfos.add(mfo);
                    if (region) regions.add(region);
                    if (group) groups.add(group);
                    if (clientName) clientNames.add(clientName);
                    if (economist) economists.add(economist);
                    if (lawyer) lawyers.add(lawyer);
                }
            });
            
            filterData.regions = Array.from(regions).sort();
            filterData.mfos = Array.from(mfos).sort();
            filterData.groups = Array.from(groups).sort();
            filterData.clientNames = Array.from(clientNames).sort();
            filterData.economists = Array.from(economists).sort();
            filterData.lawyers = Array.from(lawyers).sort();
        }
        
        // Выбранные фильтры
        const selectedFilters = {
            region: '',
            mfo: '',
            group: '',
            clientName: '',
            economist: '',
            lawyer: ''
        };
        
        // Инициализация фильтров
        function initFilters() {
            collectFilterData();
            
            // Заполняем datalist для всех фильтров (в порядке колонок: MFO, Region, Group, Clients, Economist, Lawyer)
            populateDatalist('mfo-list', filterData.mfos);
            populateDatalist('region-list', filterData.regions);
            populateDatalist('group-list', filterData.groups);
            populateDatalist('client-name-list', filterData.clientNames);
            populateDatalist('economist-list', filterData.economists);
            populateDatalist('lawyer-list', filterData.lawyers);
            
            // Обработчики для всех input фильтров
            document.getElementById('mfo-input').addEventListener('input', function() {
                selectedFilters.mfo = this.value.trim();
                applyFilters();
            });
            
            document.getElementById('region-input').addEventListener('input', function() {
                selectedFilters.region = this.value.trim();
                applyFilters();
            });
            
            document.getElementById('group-input').addEventListener('input', function() {
                selectedFilters.group = this.value.trim();
                applyFilters();
            });
            
            document.getElementById('client-name-input').addEventListener('input', function() {
                selectedFilters.clientName = this.value.trim();
                applyFilters();
            });
            
            document.getElementById('economist-input').addEventListener('input', function() {
                selectedFilters.economist = this.value.trim();
                applyFilters();
            });
            
            document.getElementById('lawyer-input').addEventListener('input', function() {
                selectedFilters.lawyer = this.value.trim();
                applyFilters();
            });
            
            // Кнопка очистки
            document.getElementById('clear-filters-btn').addEventListener('click', clearAllFilters);
        }
        
        // Заполнение select фильтра
        function populateSelectFilter(selectId, options) {
            const select = document.getElementById(selectId);
            if (!select) return;
            
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                optionElement.textContent = option;
                select.appendChild(optionElement);
            });
        }
        
        // Заполнение datalist для input фильтров
        function populateDatalist(datalistId, options) {
            const datalist = document.getElementById(datalistId);
            if (!datalist) return;
            
            // Очищаем существующие опции
            datalist.innerHTML = '';
            
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                datalist.appendChild(optionElement);
            });
        }
        
        
        // Применение фильтров
        function applyFilters() {
            const rows = document.querySelectorAll('.data-table tbody tr');
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                if (cells.length < 7) return;
                
                const mfo = cells[1].textContent.trim();
                const region = cells[2].textContent.trim();
                const group = cells[3].textContent.trim(); // Group на позиции 3
                const clientName = cells[4].textContent.trim(); // Clients на позиции 4
                const economist = cells[5].textContent.trim(); // Economist на позиции 5
                const lawyer = cells[6].textContent.trim(); // Lawyer на позиции 6
                
                let show = true;
                
                // Проверка фильтров (все используют частичное совпадение для поиска)
                if (selectedFilters.mfo && !mfo.toLowerCase().includes(selectedFilters.mfo.toLowerCase())) {
                    show = false;
                }
                
                if (selectedFilters.region && !region.toLowerCase().includes(selectedFilters.region.toLowerCase())) {
                    show = false;
                }
                
                if (selectedFilters.group && !group.toLowerCase().includes(selectedFilters.group.toLowerCase())) {
                    show = false;
                }
                
                if (selectedFilters.clientName && !clientName.toLowerCase().includes(selectedFilters.clientName.toLowerCase())) {
                    show = false;
                }
                
                if (selectedFilters.economist && !economist.toLowerCase().includes(selectedFilters.economist.toLowerCase())) {
                    show = false;
                }
                
                if (selectedFilters.lawyer && !lawyer.toLowerCase().includes(selectedFilters.lawyer.toLowerCase())) {
                    show = false;
                }
                
                row.style.display = show ? '' : 'none';
            });
        }
        
        // Очистка всех фильтров
        function clearAllFilters() {
            selectedFilters.mfo = '';
            selectedFilters.region = '';
            selectedFilters.group = '';
            selectedFilters.clientName = '';
            selectedFilters.economist = '';
            selectedFilters.lawyer = '';
            
            // Очищаем все input поля
            document.getElementById('mfo-input').value = '';
            document.getElementById('region-input').value = '';
            document.getElementById('group-input').value = '';
            document.getElementById('client-name-input').value = '';
            document.getElementById('economist-input').value = '';
            document.getElementById('lawyer-input').value = '';
            
            applyFilters();
        }
    </script>
</body>
</html>

