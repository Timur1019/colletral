<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corporative - Legal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/forms.css">
    <link rel="stylesheet" href="styles/bootstrap-overrides.css">
    <link rel="stylesheet" href="styles/legal.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">Corporate collection</h1>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Monitoring</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="index.html" class="nav-link">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="clients.html" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>Clients</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="workouts.html" class="nav-link">
                                <i class="fas fa-chart-line"></i>
                                <span>Workouts</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="regions.html" class="nav-link">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>Regions</span>
                            </a>
                        </li>
                        <li class="nav-item active">
                            <a href="legal.html" class="nav-link">
                                <i class="fas fa-gavel"></i>
                                <span>Legal</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-section-title">Access Controls</h3>
                    <ul class="nav-list">
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-users"></i>
                                <span>Users</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-shield-alt"></i>
                                <span>Roles</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name">admin</div>
                        <div class="user-role">Regular User</div>
                    </div>
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="content-header">
                <div class="header-left">
                    <button class="btn-back" onclick="legalModule.goBack()">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back</span>
                    </button>
                    <h1 class="page-header-title" id="legal-page-title">Legal</h1>
                </div>
                <div class="header-right">
                    <div class="breadcrumbs" id="legal-breadcrumbs">
                        <i class="fas fa-home"></i>
                        <span class="breadcrumb-separator">/</span>
                        <span>Home</span>
                    </div>
                    <div class="header-actions">
                        <div class="language-selector-dropdown">
                            <img src="https://flagcdn.com/w20/us.png" alt="EN" class="flag-icon">
                            <span class="lang active">EN</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <button class="icon-btn notification-btn-header">
                            <i class="fas fa-bell"></i>
                        </button>
                        <button class="icon-btn lightbulb-btn">
                            <i class="fas fa-lightbulb"></i>
                        </button>
                        <div class="user-profile-header">
                            <div class="user-avatar-header">
                                <span>RT</span>
                            </div>
                            <span class="user-name-header">Raximbardiyev Temur</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Body -->
            <div class="content-body">
                <!-- Главная страница Legal -->
                <div id="legal-main-page">
                    <!-- KPI Cards -->
                    <div class="legal-kpi-cards">
                        <div class="legal-kpi-card">
                            <div class="legal-kpi-icon">
                                <i class="fas fa-folder-open"></i>
                            </div>
                            <div class="legal-kpi-content">
                                <div class="legal-kpi-title">Всего дел</div>
                                <div class="legal-kpi-value">124</div>
                            </div>
                        </div>
                        <div class="legal-kpi-card">
                            <div class="legal-kpi-icon">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="legal-kpi-content">
                                <div class="legal-kpi-title">В работе</div>
                                <div class="legal-kpi-value">37</div>
                            </div>
                        </div>
                        <div class="legal-kpi-card">
                            <div class="legal-kpi-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="legal-kpi-content">
                                <div class="legal-kpi-title">Закрыто</div>
                                <div class="legal-kpi-value">87</div>
                            </div>
                        </div>
                        <div class="legal-kpi-card">
                            <div class="legal-kpi-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="legal-kpi-content">
                                <div class="legal-kpi-title">Сумма взыскания</div>
                                <div class="legal-kpi-value">1.2 млрд</div>
                            </div>
                        </div>
                        <div class="legal-kpi-card">
                            <div class="legal-kpi-icon">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="legal-kpi-content">
                                <div class="legal-kpi-title">Юристов</div>
                                <div class="legal-kpi-value">5</div>
                            </div>
                        </div>
                    </div>

                    <!-- Table of Groups -->
                    <div class="table-container">
                        <div class="table-wrapper">
                            <table class="table table-striped table-hover" id="legal-groups-table">
                                <thead>
                                    <tr>
                                        <th>
                                            №
                                            <input type="text" class="table-filter-input" placeholder="Фильтр" data-column="0">
                                        </th>
                                        <th>
                                            Hub
                                            <input type="text" class="table-filter-input" placeholder="Фильтр" data-column="1">
                                        </th>
                                        <th>
                                            Group Name
                                            <input type="text" class="table-filter-input" placeholder="Фильтр" data-column="2">
                                        </th>
                                        <th>
                                            Local Exposure
                                            <input type="text" class="table-filter-input" placeholder="Фильтр" data-column="3">
                                        </th>
                                        <th>
                                            IFRS Exposure
                                            <input type="text" class="table-filter-input" placeholder="Фильтр" data-column="4">
                                        </th>
                                        <th>
                                            Lawyer
                                            <input type="text" class="table-filter-input" placeholder="Фильтр" data-column="5">
                                        </th>
                                        <th>Edit</th>
                                    </tr>
                                </thead>
                                <tbody id="legal-groups-table-body">
                                    <!-- Данные будут заполнены через JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Страница группы клиентов -->
                <div id="legal-group-page" style="display: none;">
                    <div class="legal-group-header">
                        <h2 class="legal-group-title" id="legal-group-title"></h2>
                        <p class="legal-group-description">This screen displays all clients belonging to the group</p>
                    </div>

                    <!-- KPI Cards для группы -->
                    <div class="legal-kpi-cards" id="legal-group-kpi">
                        <!-- Заполняется динамически -->
                    </div>

                    <!-- Пустое состояние до выбора клиента -->
                    <div class="legal-empty-state" id="legal-group-empty">
                        <div class="legal-empty-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <div class="legal-empty-text">
                            <h3>Mijozni tanlang</h3>
                            <p>Ma'lumotlarini ko'rish uchun mijozni tanlang</p>
                        </div>
                    </div>

                    <!-- Список клиентов группы -->
                    <div class="legal-clients-list" id="legal-clients-list" style="display: none;">
                        <!-- Заполняется динамически -->
                    </div>
                </div>

                <!-- Страница клиента -->
                <div id="legal-client-page" style="display: none;">
                    <div class="legal-client-header">
                        <h2 class="legal-client-title" id="legal-client-title"></h2>
                    </div>

                    <!-- Карточка клиента -->
                    <div class="legal-client-card" id="legal-client-card">
                        <!-- Данные клиента будут заполнены динамически -->
                    </div>

                    <!-- Кнопка + Add -->
                    <div class="legal-add-btn-container">
                        <button class="legal-add-btn" onclick="legalModule.openAddModal()">
                            <i class="fas fa-plus"></i>
                            Add
                        </button>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="content-footer">
                <p>The application code is published under the MIT license. 2025 - 2025</p>
                <p>Version: 1.0.0</p>
            </footer>
        </main>
    </div>

    <!-- Модальное окно: Выбор действия -->
    <div class="modal fade" id="legal-add-action-modal" tabindex="-1" aria-labelledby="legalAddActionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="legalAddActionModalLabel">Добавить юридическое действие</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="legal-action-list">
                        <button class="legal-action-item" onclick="legalModule.selectAction('talabnoma')">
                            <i class="fas fa-file-alt"></i>
                            <span>Талабнома</span>
                        </button>
                        <button class="legal-action-item" onclick="legalModule.selectAction('sud')">
                            <i class="fas fa-gavel"></i>
                            <span>Суд ва ижро варакаси</span>
                        </button>
                        <button class="legal-action-item" onclick="legalModule.selectAction('bankrot')">
                            <i class="fas fa-building"></i>
                            <span>Банкротство</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно: Талабнома -->
    <div class="modal fade" id="legal-talabnoma-modal" tabindex="-1" aria-labelledby="legalTalabnomaModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="legalTalabnomaModalLabel">Талабнома</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="legal-talabnoma-form">
                        <div class="legal-form-group">
                            <label class="legal-form-label">Сана <span class="required">*</span></label>
                            <input type="text" class="form-control legal-date-input" name="date" required>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">Талабнома <span class="required">*</span></label>
                            <textarea class="form-control" name="talabnoma" rows="3" required></textarea>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">Тарафлар <span class="required">*</span></label>
                            <input type="text" class="form-control" name="taraf" required>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">
                                Изох
                                <i class="fas fa-info-circle legal-tooltip-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Дополнительная информация"></i>
                            </label>
                            <textarea class="form-control" name="izoh" rows="3"></textarea>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">Прикрепление файла</label>
                            <div class="file-upload-area">
                                <input type="file" class="file-input" name="file" multiple>
                                <div class="file-upload-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <div class="file-upload-text">Перетащите файлы сюда или нажмите для выбора</div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button type="button" class="btn btn-primary" onclick="legalModule.addTalabnoma()">
                        <i class="fas fa-plus"></i> Add
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно: Выбор судебной инстанции -->
    <div class="modal fade" id="legal-instance-modal" tabindex="-1" aria-labelledby="legalInstanceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="legalInstanceModalLabel">Выберите судебную инстанцию</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="legal-action-list">
                        <button class="legal-action-item" onclick="legalModule.selectInstance('1-instance')">
                            <i class="fas fa-balance-scale"></i>
                            <span>1-инстанция</span>
                        </button>
                        <button class="legal-action-item" onclick="legalModule.selectInstance('apellyatsiya')">
                            <i class="fas fa-balance-scale"></i>
                            <span>Апелляция</span>
                        </button>
                        <button class="legal-action-item" onclick="legalModule.selectInstance('kassatsiya')">
                            <i class="fas fa-balance-scale"></i>
                            <span>Кассация</span>
                        </button>
                        <button class="legal-action-item" onclick="legalModule.selectInstance('taftish')">
                            <i class="fas fa-search"></i>
                            <span>Тафтиш</span>
                        </button>
                        <button class="legal-action-item" onclick="legalModule.selectInstance('oliy-sud')">
                            <i class="fas fa-landmark"></i>
                            <span>Олий Суд</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно: Форма судебной инстанции -->
    <div class="modal fade" id="legal-instance-form-modal" tabindex="-1" aria-labelledby="legalInstanceFormModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="legalInstanceFormModalLabel">Судебная инстанция</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="legal-instance-form">
                        <input type="hidden" name="instance-type" id="instance-type-input">
                        <div class="legal-form-group">
                            <label class="legal-form-label">Сана <span class="required">*</span></label>
                            <input type="text" class="form-control legal-date-input" name="date" required>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">Сумма <span class="required">*</span></label>
                            <input type="number" class="form-control" name="summa" step="0.01" required>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">Суд номи <span class="required">*</span></label>
                            <input type="text" class="form-control legal-lookup-input" name="sud-nomi" id="sud-nomi-lookup" required autocomplete="off">
                            <div class="legal-lookup-dropdown" id="sud-nomi-dropdown"></div>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">Жавобгарлар <span class="required">*</span></label>
                            <input type="text" class="form-control" name="javobgarlar" required>
                        </div>
                        <div class="legal-form-group">
                            <label class="legal-form-label">
                                Изох
                                <i class="fas fa-info-circle legal-tooltip-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Дополнительная информация"></i>
                            </label>
                            <textarea class="form-control" name="izoh" rows="3"></textarea>
                        </div>

                        <!-- Блок: Суд қарори -->
                        <div class="legal-form-section">
                            <h6 class="legal-form-section-title">Суд қарори</h6>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Қисман / Тўлиқ <span class="required">*</span></label>
                                <select class="form-control" name="qaror-type" required>
                                    <option value="">---</option>
                                    <option value="qisman">Қисман</option>
                                    <option value="toliq">Тўлиқ</option>
                                </select>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Сана <span class="required">*</span></label>
                                <input type="text" class="form-control legal-date-input" name="qaror-date" required>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Сумма <span class="required">*</span></label>
                                <input type="number" class="form-control" name="qaror-summa" step="0.01" required>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Иш рақами</label>
                                <input type="text" class="form-control" name="ish-raqami" id="ish-raqami-input" readonly>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Изох</label>
                                <textarea class="form-control" name="qaror-izoh" rows="2"></textarea>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Файл</label>
                                <div class="file-upload-area">
                                    <input type="file" class="file-input" name="qaror-file" multiple>
                                    <div class="file-upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <div class="file-upload-text">Перетащите файлы сюда или нажмите для выбора</div>
                                </div>
                            </div>
                        </div>

                        <!-- Блок: Ижро иши -->
                        <div class="legal-form-section">
                            <h6 class="legal-form-section-title">Ижро иши</h6>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Ижро иши рақами <span class="required">*</span></label>
                                <input type="text" class="form-control" name="ijro-raqami" required>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Сана <span class="required">*</span></label>
                                <input type="text" class="form-control legal-date-input" name="ijro-date" required>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Ижро иши қўзғатилган сана</label>
                                <input type="text" class="form-control legal-date-input" name="ijro-qozgatilgan-date">
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">МИБ бўлими <span class="required">*</span></label>
                                <select class="form-control" name="mib-bolimi" required>
                                    <option value="">---</option>
                                    <!-- Заполняется через JavaScript -->
                                </select>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Давлат иштирокчиси</label>
                                <input type="text" class="form-control" name="davlat-ishtirokchisi" placeholder="Ф.И.О. — телефон">
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Ижро иши тугатиш сана</label>
                                <input type="text" class="form-control legal-date-input" name="ijro-tugatish-date">
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">
                                    Изох
                                    <i class="fas fa-info-circle legal-tooltip-icon" data-bs-toggle="tooltip" data-bs-placement="top" title="Дополнительная информация"></i>
                                </label>
                                <textarea class="form-control" name="ijro-izoh" rows="2"></textarea>
                            </div>
                            <div class="legal-form-group">
                                <label class="legal-form-label">Файл</label>
                                <div class="file-upload-area">
                                    <input type="file" class="file-input" name="ijro-file" multiple>
                                    <div class="file-upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <div class="file-upload-text">Перетащите файлы сюда или нажмите для выбора</div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                    <button type="button" class="btn btn-primary" onclick="legalModule.addInstance()">
                        <i class="fas fa-plus"></i> Add
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
    <script src="legal.js"></script>
</body>
</html>
